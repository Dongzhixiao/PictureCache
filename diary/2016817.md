### 时间:2016年8月17日 天气:晴:sunny:
-----
#####   Author:冬之晓:dizzy_face:
#####   Email: 347916416@qq.com
#####   MyAppearance: ![MyAppearance](../MyPicture.JPG "我的头像")
----------

<pre>
    今天开始，有任务发布了，因此一早我就开始要完成界面编程的工作，本来我认为界
面的逻辑比较复杂，但是仔细一看，发现其实里面的东西也挺简单的，一上午就把需要完
成的工作给做完了，然后剩下的时间就开始研究如何进行版本合并和提交。一下午的实践
让我感觉学到了好多知识。真的是非常棒，程序确实非常有意思，真后悔当年大学没有报
程序相关的专业。
</pre>

今天在提交代码的时候，第一次进行了提交同时成功的进行了版本合并。再次记录一下，防止以后忘记啦~

#### 关于版本提交

以前我就喜欢使用github进行版本的提交，但是当时没有理解秘钥和公钥的的用法，今天在使用phabricator进行提交的时候发现还是不会，最后虽然弄好了，但是浪费了很多时间。今天要把提交的过程总结下来，以后要随时反复复习。

##### 公钥秘钥的理解

首先需要理解公钥秘钥到底是什么，其实可以这样理解，**公钥**就相当于**一把锁**，**秘钥**就相当于开这把所的**钥匙**。生成的公钥要传到服务器端为其上一把锁，而秘钥需要自己拿着，以后提交代码的时候，git会自动通过电脑里面的私钥来打开服务器的那个公钥，然后才允许提交。

##### 生成公钥和私钥的方法

钥匙和锁一般是一块生成的，因此可以分别在服务器端(phabricator端)和本地生成，如果在服务器端生成，可以在phabricator登录后，点击右上角的扳手形状:wrench:的按钮，然后进入设置，然后选择左边栏目下的“SSH Public Keys”按钮，这时就会在右面的界面上面看到：

![图片](https://github.com/Dongzhixiao/PictureCache/blob/master/diaryPic/SSH.png "图片")

在这里可以选择“Genrate Kyepair”进行秘钥和公钥的生成。生成后，会让你下载私钥，然后公钥会自动在表格里面出现，同时自己可以保存一个公钥，这样如果有一天你不小心将网上的公钥删除了，就可以使用界面上的“Upload Public Key”按钮进行公钥的上传，这样就不用再生成一对了。私钥的使用要注意，为了让网站可以识别你的私钥，需要在自己的的当前用户目录下(即windows下面的路径`%USERPROFILE%`)建立一个`.ssh`的文件夹。由于直接以`.`开头的文件无法直接创建，这里可以使用命令行：

```bat
cd %USERPROFILE%
md .ssh
```

创建好之后，就可以在此文件夹下把刚才生成的私钥文件放进去，然后改名为`id_rsa`，注意，这里的文件**不能有后缀**，否则的话进行上传文件的时候会不识别你的私钥的。等一切都安排好后，就可以用你这把“钥匙”打开网上的那个“锁”进行上传啦！

#### 关于版本合并

以前一直使用git命令进行提交，但是从来都是自己一个人进行代码的编写，所以没有涉及到版本合并，人总是喜欢对陌生的东西产生恐惧，认为合并很难。但是今天发现，通过适当的工具，进行版本合并还是很容易的。首先需要有适当的工具。

##### git的下载安装

要想使用git进行版本合并的管理，首先需要有git版本控制工具，一般git下载在其[官网](https://git-scm.com/download "git官网")，之后进行安装，就看以在任何地方鼠标右键时出现图像：

![右键菜单](https://github.com/Dongzhixiao/PictureCache/blob/master/diaryPic/gitMerge.png "右键菜单")

在右键菜单里面出现了上图所示的红色圆圈标注的选项则说明，则说明git安装成功了！

##### TortoiseGit的下载安装

TortoiseGit是一个开放的,为的git版本控制系统的源客户端.像一个普通的文件服务器,除了会记得您有史以来的文件和目录的每一个变化外,还可以恢复您的文件的旧版本,并研究如何以及何时改变了历史数据,谁改变了它。可以在[官网](https://tortoisegit.org/ "TortoiseGit官网")下载然后安装，成功安装后如果后点击右键，会出现上面一个图形中蓝色圆圈标识的几个选项，这就说明TortoiseGit安装成功了！

##### 进行版本合并 

在合并代码的时候，为了方便解释，我举一个例子：

假如现在有一个项目名叫“A”，使用git版本控制工具现在目前提交到A版本，现在两个人别要求加入不同的功能，其中一个人修改后变成项目“B”，另一个人修改后成为项目“C”。假如项目B先提交，这是如果项目C提交就会冲突(因为B和C的前一个版本都是A)。这样可以：

1. 建立一个文件夹，名叫Merge(名字随便)，然后将项目B的全部代码考进去。
2. 使用git在当前目录下面进行初始化并提交。参考命令：

```git
git init
git add .
git commit -m "before merge"
```

3. 将C项目完全拷贝进去，相同的文件直接覆盖。
4. 在当前目录下点击鼠标右键，选择“git commit -> "master"...”然后就会出现图片：

![提交图片](https://github.com/Dongzhixiao/PictureCache/blob/master/diaryPic/commitPicture.png "提交图片")，

在图片红圈中，会出现所有改变的文件，这样我们双击一个文件，就会出现图片：

![修改图片](https://github.com/Dongzhixiao/PictureCache/blob/master/diaryPic/solveConflict.png "修改图片")

5. 在图片中左边是修改前的，右边是修改后的，修改的地方都有重点标注，这样我们就能够很容易修改右边的文件成为我们希望的那样，如果某些行需要左边的，就可以选择，然后点击工具栏上面的“use left block”按钮进行修改，非常方便快捷。
6. 将每一个文件按照第5步都修改好后，就完成合并工作。

合并好后，如果运行程序发现没有问题的话，就可以提交了。
以上就是合并的整个过程，当然，如果两个人修改的地方都很多的话就最好，两人在一起讨论进行合并，这样效率比较高。
